<?xml version="1.0"?>
<launch>
  <arg name="serial_no_camera1" default="919122072278" />
  <arg name="serial_no_camera2" default="827112070805" />

  <arg name="camera1" default="tower_cam3d_front" />
  <arg name="camera2" default="tower_cam3d_back" />

  <arg name="tf_prefix_camera1" default="$(arg camera1)_camera" />
  <arg name="tf_prefix_camera2" default="$(arg camera2)_camera" />

  <arg name="external_manager" default="false" />
  <arg name="manager" default="realsense2_camera_manager" />
  <arg name="output" default="screen" />
  <arg name="respawn" default="false" />

  <arg name="depth_width" default="640" />
  <arg name="depth_height" default="480" />
  <arg name="enable_depth" default="true" />

  <arg name="color_width" default="640" />
  <arg name="color_height" default="480" />
  <arg name="enable_color" default="true" />

  <arg name="depth_fps" default="-1" />
  <arg name="color_fps" default="-1" />

  <arg name="enable_pointcloud" default="false" />
  <arg name="pointcloud_texture_stream" default="RS2_STREAM_COLOR" />
  <arg name="pointcloud_texture_index" default="0" />
  <arg name="ordered_pc" default="true" />

  <arg name="enable_sync" default="true" />
  <arg name="align_depth" default="true" />

  <arg name="publish_tf" default="false" />
  <arg name="tf_publish_rate" default="0" />

  <arg name="filters" default="spatial,hole_filling,pointcloud" />
  <arg name="clip_distance" default="2.0" />
  <arg name="initial_reset" default="false" />
  <arg name="reconnect_timeout" default="6.0" />
  <arg name="wait_for_device_timeout" default="-1.0" />

  <group ns="$(arg camera1)">
    <include file="$(find realsense2_camera)/launch/includes/nodelet.launch.xml">
      <arg name="serial_no" value="$(arg serial_no_camera1)" />
      <arg name="tf_prefix" value="$(arg tf_prefix_camera1)" />
      <arg name="external_manager" value="$(arg external_manager)" />
      <arg name="manager" value="$(arg manager)" />
      <arg name="output" value="$(arg output)" />
      <arg name="respawn" value="$(arg respawn)" />

      <!-- <arg name="enable_pointcloud"        value="$(arg enable_pointcloud)"/>
      <arg name="pointcloud_texture_stream" value="$(arg pointcloud_texture_stream)"/>
      <arg name="pointcloud_texture_index"  value="$(arg pointcloud_texture_index)"/> -->
      <arg name="enable_sync" value="$(arg enable_sync)" />
      <arg name="align_depth" value="$(arg align_depth)" />

      <arg name="depth_width" value="$(arg depth_width)" />
      <arg name="depth_height" value="$(arg depth_height)" />
      <arg name="enable_depth" value="$(arg enable_depth)" />

      <arg name="color_width" value="$(arg color_width)" />
      <arg name="color_height" value="$(arg color_height)" />
      <arg name="enable_color" value="$(arg enable_color)" />

      <!-- <arg name="depth_fps"                value="$(arg depth_fps)"/>
      <arg name="color_fps"                value="$(arg color_fps)"/> -->

      <arg name="publish_tf" value="$(arg publish_tf)" />
      <arg name="tf_publish_rate" value="$(arg tf_publish_rate)" />

      <arg name="filters" value="$(arg filters)" />
      <arg name="clip_distance" value="$(arg clip_distance)" />
      <arg name="initial_reset" value="$(arg initial_reset)" />
      <!-- <arg name="reconnect_timeout"        value="$(arg reconnect_timeout)"/>
      <arg name="wait_for_device_timeout"  value="$(arg wait_for_device_timeout)"/> -->
      <arg name="ordered_pc" value="$(arg ordered_pc)" />

    </include>

    <rosparam>
      /tower_cam3d_front/stereo_module/enable_auto_exposure: false
      /tower_cam3d_front/stereo_module/hdr_enabled: false
      /tower_cam3d_front/stereo_module/exposure: 850
      /tower_cam3d_front/stereo_module/laser_power: 360

      /tower_cam3d_front/spatial/holes_fill: 2

      /tower_cam3d_front/hole_filling/holes_fill: 2
    </rosparam>
  </group>

  <group ns="$(arg camera2)">
    <include file="$(find realsense2_camera)/launch/includes/nodelet.launch.xml">
      <arg name="serial_no" value="$(arg serial_no_camera2)" />
      <arg name="tf_prefix" value="$(arg tf_prefix_camera2)" />
      <arg name="external_manager" value="$(arg external_manager)" />
      <arg name="manager" value="$(arg manager)" />
      <arg name="output" value="$(arg output)" />
      <arg name="respawn" value="$(arg respawn)" />

      <!-- <arg name="enable_pointcloud"        value="$(arg enable_pointcloud)"/>
      <arg name="pointcloud_texture_stream" value="$(arg pointcloud_texture_stream)"/>
      <arg name="pointcloud_texture_index"  value="$(arg pointcloud_texture_index)"/> -->
      <arg name="enable_sync" value="$(arg enable_sync)" />
      <arg name="align_depth" value="$(arg align_depth)" />

      <arg name="depth_width" value="$(arg depth_width)" />
      <arg name="depth_height" value="$(arg depth_height)" />
      <arg name="enable_depth" value="$(arg enable_depth)" />

      <arg name="color_width" value="$(arg color_width)" />
      <arg name="color_height" value="$(arg color_height)" />
      <arg name="enable_color" value="$(arg enable_color)" />

      <!-- <arg name="depth_fps"                value="$(arg depth_fps)"/>
      <arg name="color_fps"                value="$(arg color_fps)"/> -->

      <arg name="publish_tf" value="$(arg publish_tf)" />
      <arg name="tf_publish_rate" value="$(arg tf_publish_rate)" />

      <arg name="filters" value="$(arg filters)" />
      <arg name="clip_distance" value="$(arg clip_distance)" />
      <arg name="initial_reset" value="$(arg initial_reset)" />
      <!-- <arg name="reconnect_timeout"        value="$(arg reconnect_timeout)"/>
      <arg name="wait_for_device_timeout"  value="$(arg wait_for_device_timeout)"/> -->
      <arg name="ordered_pc" value="$(arg ordered_pc)" />

    </include>

    <rosparam>
      /tower_cam3d_back/stereo_module/enable_auto_exposure: false
      /tower_cam3d_back/stereo_module/hdr_enabled: false
      /tower_cam3d_back/stereo_module/exposure: 850
      /tower_cam3d_back/stereo_module/laser_power: 360

      /tower_cam3d_back/spatial/holes_fill: 2

      /tower_cam3d_back/hole_filling/holes_fill: 2
    </rosparam>
  </group>

</launch>